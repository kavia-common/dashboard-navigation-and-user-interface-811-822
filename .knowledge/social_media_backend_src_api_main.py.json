{"is_source_file": true, "format": "Python", "description": "This is a frontend-backend integrated source file for a social media backend API built with FastAPI, SQLAlchemy, and JWT authentication. It includes route definitions, models, schemas, and utility functions for user registration, login, profile management, post creation, engagement, and analytics.", "external_files": ["social_media_backend/.env", "sql_init.sh"], "external_methods": ["load_dotenv", "create_engine", "sessionmaker", "jwt.encode", "jwt.decode", "os.getenv", "Base.metadata.create_all"], "published": ["app", "get_db", "verify_password", "get_password_hash", "create_access_token", "get_user_by_email", "get_user", "get_current_user"], "classes": [{"name": "User", "description": "Represents a user in the system with attributes like email, password hash, and relationships to profile and posts."}, {"name": "Profile", "description": "Stores profile information such as display name, bio, avatar URL, and related user."}, {"name": "Post", "description": "Represents a social media post created by a user, including content, media, visibility, and timestamp."}, {"name": "Engagement", "description": "Records user interactions with posts, such as likes, comments, shares, and views."}, {"name": "AnalyticsDaily", "description": "Stores daily aggregated analytics data for users, including counts of posts, likes, comments, shares, views, followers, and following."}, {"name": "Token", "description": "Pydantic schema representing JWT token response."}, {"name": "TokenData", "description": "Holds decoded token data, such as user_id and email."}, {"name": "RegisterRequest", "description": "Schema for user registration inputs (email and password)."}, {"name": "LoginRequest", "description": "Schema for login payload (email and password)."}, {"name": "ProfileOut", "description": "Schema for returning user profile information."}, {"name": "ProfileUpdate", "description": "Schema for updating profile fields."}, {"name": "PostCreate", "description": "Schema for creating a new post."}, {"name": "PostOut", "description": "Schema for returning post data."}, {"name": "EngagementCreate", "description": "Schema for creating an engagement on a post."}, {"name": "AnalyticsSummary", "description": "Schema for summarizing analytics data."}], "methods": [{"name": "get_db()", "description": "Provides a database session to route handlers, ensuring proper closing.", "scope": "", "scopeKind": ""}, {"name": "verify_password", "description": "Verifies a plaintext password against its stored hash."}, {"name": "str get_password_hash(password: str)", "description": "Generates a password hash from a plaintext password.", "scope": "", "scopeKind": ""}, {"name": "str create_access_token(data: dict, expires_delta: Optional[timedelta] = None)", "description": "Generates a JWT token with optional expiration.", "scope": "", "scopeKind": ""}, {"name": "Optional[User] get_user_by_email(db: Session, email: str)", "description": "Retrieves a user record by email.", "scope": "", "scopeKind": ""}, {"name": "Optional[User] get_user(db: Session, user_id: UUID)", "description": "Retrieves a user record by user ID.", "scope": "", "scopeKind": ""}, {"name": "User get_current_user(token: str = Depends(oauth2_scheme), db: Session = Depends(get_db))", "description": "Decodes JWT token and retrieves the current authenticated user.", "scope": "", "scopeKind": ""}, {"name": "str _build_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "analytics_daily( days: int = Query(7, ge=1, le=90), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "analytics_summary( days: int = Query(7, ge=1, le=90, description=\"How many recent days to aggregate\"), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_engagement( post_id: UUID = Path(..., description=\"Post ID\"), payload: EngagementCreate = Body(...), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_post( payload: PostCreate, current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_my_profile(current_user: User = Depends(get_current_user), db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_my_posts( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["load_dotenv()", "create_engine()", "sessionmaker()", "jwt.encode()", "jwt.decode()", "os.getenv()"], "search-terms": ["FastAPI", "OAuth2PasswordBearer", "JWT", "PostgreSQL", "SocialMedia", "UserModel", "ProfileModel", "PostModel", "EngagementModel", "AnalyticsModel", "AuthEndpoints", "ProfileEndpoints", "PostEndpoints", "EngagementEndpoints", "AnalyticsEndpoints"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "a871a32027a4c3487f5bd426ed5820f602b8a68e", "revision_history": [{"9": "a871a32027a4c3487f5bd426ed5820f602b8a68e"}, {"10": "a871a32027a4c3487f5bd426ed5820f602b8a68e"}], "ctags": [{"_type": "tag", "name": "ACCESS_TOKEN_EXPIRE_MINUTES", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"JWT_EXPIRE_MINUTES\", \"60\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ALGORITHM", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^ALGORITHM = \"HS256\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "AnalyticsDaily", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class AnalyticsDaily(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AnalyticsSummary", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class AnalyticsSummary(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Base", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "Config", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^DATABASE_URL = _build_db_url()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Engagement", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class Engagement(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EngagementCreate", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class EngagementCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PGUUID", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^from sqlalchemy.dialects.postgresql import UUID as PGUUID$/", "language": "Python", "kind": "unknown", "nameref": "unknown:UUID"}, {"_type": "tag", "name": "Post", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class Post(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PostCreate", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class PostCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PostOut", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class PostOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Profile", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class Profile(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProfileOut", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class ProfileOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ProfileUpdate", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class ProfileUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RegisterRequest", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class RegisterRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SECRET_KEY", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^SECRET_KEY = os.getenv(\"JWT_SECRET\", \"CHANGE_ME_IN_ENV\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionLocal", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^SessionLocal = sessionmaker(bind=engine, autocommit=False, autoflush=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Token", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class Token(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenData", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class TokenData(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"analytics_daily\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"engagements\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Engagement", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"posts\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"profiles\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "_build_db_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def _build_db_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "access_token", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "analytics_daily", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def analytics_daily($/", "language": "Python", "kind": "function", "signature": "( days: int = Query(7, ge=1, le=90), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "analytics_summary", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def analytics_summary($/", "language": "Python", "kind": "function", "signature": "( days: int = Query(7, ge=1, le=90, description=\"How many recent days to aggregate\"), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "app", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    avatar_url = Column(Text)$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    avatar_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "avatar_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    avatar_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    bio = Column(Text)$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    bio: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "bio", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    bio: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "comments_count", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    comments_count = Column(Integer, nullable=False, server_default=text(\"0\"))$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    content = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "create_access_token", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(data: dict, expires_delta: Optional[timedelta] = None)"}, {"_type": "tag", "name": "create_engagement", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def create_engagement($/", "language": "Python", "kind": "function", "signature": "( post_id: UUID = Path(..., description=\"Post ID\"), payload: EngagementCreate = Body(...), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "create_post", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def create_post($/", "language": "Python", "kind": "function", "signature": "( payload: PostCreate, current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "Engagement", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    display_name = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    display_name: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    email = Column(String, unique=True, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email address\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    email: Optional[EmailStr] = None$/", "language": "Python", "typeref": "typename:Optional[EmailStr]", "kind": "variable", "scope": "TokenData", "scopeKind": "class"}, {"_type": "tag", "name": "engagements", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    engagements = relationship(\"Engagement\", back_populates=\"post\")$/", "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^engine = create_engine(DATABASE_URL, pool_pre_ping=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "followers_count", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    followers_count = Column(Integer, nullable=False, server_default=text(\"0\"))$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "following_count", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    following_count = Column(Integer, nullable=False, server_default=text(\"0\"))$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "from_attributes", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^        from_attributes = True$/", "language": "Python", "kind": "variable", "scope": "PostOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "from_attributes", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^        from_attributes = True$/", "language": "Python", "kind": "variable", "scope": "ProfileOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^async def get_current_user(token: str = Depends(oauth2_scheme), db: Session = Depends(get_db)) -/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(token: str = Depends(oauth2_scheme), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_db", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_my_profile", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def get_my_profile(current_user: User = Depends(get_current_user), db: Session = Depends(get_db)/", "language": "Python", "kind": "function", "signature": "(current_user: User = Depends(get_current_user), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "get_password_hash", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def get_password_hash(password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(password: str)"}, {"_type": "tag", "name": "get_user", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def get_user(db: Session, user_id: UUID) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, user_id: UUID)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def get_user_by_email(db: Session, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "health_check", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, autoincrement=True)$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    id = Column(PGUID, primary_key=True, server_default=text(\"gen_random_uuid()\"))$/", "language": "Python", "kind": "variable", "scope": "Engagement", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    id = Column(PGUID, primary_key=True, server_default=text(\"gen_random_uuid()\"))$/", "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    id = Column(PGUID, primary_key=True, server_default=text(\"gen_random_uuid()\"))$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    id = Column(PGUID, primary_key=True, server_default=text(\"gen_random_uuid()\"))$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    is_active = Column(Boolean, nullable=False, server_default=text(\"TRUE\"))$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "likes_count", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    likes_count = Column(Integer, nullable=False, server_default=text(\"0\"))$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "list_my_posts", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def list_my_posts($/", "language": "Python", "kind": "function", "signature": "( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), current_user: User = Depends(get_current_user), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "location", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    location = Column(Text)$/", "language": "Python", "kind": "variable", "scope": "Profile", "scopeKind": "class"}, {"_type": "tag", "name": "location", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    location: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileOut", "scopeKind": "class"}, {"_type": "tag", "name": "location", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    location: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ProfileUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "media_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    media_url = Column(Text)$/", "language": "Python", "kind": "variable", "scope": "Post", "scopeKind": "class"}, {"_type": "tag", "name": "media_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    media_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PostCreate", "scopeKind": "class"}, {"_type": "tag", "name": "media_url", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    media_url: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PostOut", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    metadata = Column(JSON, server_default=text(\"'{}'::jsonb\"))$/", "language": "Python", "kind": "variable", "scope": "Engagement", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    metadata: Optional[dict] = Field(default=None)$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "variable", "scope": "EngagementCreate", "scopeKind": "class"}, {"_type": "tag", "name": "metric_date", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    metric_date = Column(Date, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "AnalyticsDaily", "scopeKind": "class"}, {"_type": "tag", "name": "metric_date", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    metric_date: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AnalyticsSummary", "scopeKind": "class"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "openapi_tags", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "password", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^    password_hash = Column(Text, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "pwd_context", "path": "/tmp/kavia/workspace/code-generation/dashboard-navigation-and-user-interface-811-822/social_media_backend/src/api/main.py", "pattern": "/^pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}], "hash": "806cb5da1c071c9e46beef41c8917656", "format-version": 4, "code-base-name": "social_media_backend", "filename": "social_media_backend/src/api/main.py", "fields": [{"name": "ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"JWT_EXPIRE_MINUTES\", \"60\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ALGORITHM = \"HS256\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = _build_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SECRET_KEY = os.getenv(\"JWT_SECRET\", \"CHANGE_ME_IN_ENV\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(bind=engine, autocommit=False, autoflush=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"analytics_daily\"", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"engagements\"", "scope": "Engagement", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"posts\"", "scope": "Post", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"profiles\"", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "str access_token", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "avatar_url = Column(Text)", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] avatar_url", "scope": "ProfileOut", "scopeKind": "class", "description": "unavailable"}, {"name": "bio = Column(Text)", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] bio", "scope": "ProfileOut", "scopeKind": "class", "description": "unavailable"}, {"name": "comments_count = Column(Integer, nullable=False, server_default=text(\"0\"))", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "content = Column(Text, nullable=False)", "scope": "Post", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(TIMESTAMP(timezone=True), nullable=False, server_default=text(\"NOW()\"))", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "display_name = Column(Text, nullable=False)", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] display_name", "scope": "ProfileUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "email = Column(String, unique=True, nullable=False, index=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[EmailStr] email", "scope": "TokenData", "scopeKind": "class", "description": "unavailable"}, {"name": "engagements = relationship(\"Engagement\", back_populates=\"post\")", "scope": "Post", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, pool_pre_ping=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "followers_count = Column(Integer, nullable=False, server_default=text(\"0\"))", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "following_count = Column(Integer, nullable=False, server_default=text(\"0\"))", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "from_attributes = True", "scope": "PostOut.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, autoincrement=True)", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(PGUID, primary_key=True, server_default=text(\"gen_random_uuid()\"))", "scope": "Engagement", "scopeKind": "class", "description": "unavailable"}, {"name": "is_active = Column(Boolean, nullable=False, server_default=text(\"TRUE\"))", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "likes_count = Column(Integer, nullable=False, server_default=text(\"0\"))", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "location = Column(Text)", "scope": "Profile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] location", "scope": "ProfileOut", "scopeKind": "class", "description": "unavailable"}, {"name": "media_url = Column(Text)", "scope": "Post", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] media_url", "scope": "PostCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "metadata = Column(JSON, server_default=text(\"'{}'::jsonb\"))", "scope": "Engagement", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[dict] metadata", "scope": "EngagementCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "metric_date = Column(Date, nullable=False)", "scope": "AnalyticsDaily", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] metric_date", "scope": "AnalyticsSummary", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str password", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "password_hash = Column(Text, nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}